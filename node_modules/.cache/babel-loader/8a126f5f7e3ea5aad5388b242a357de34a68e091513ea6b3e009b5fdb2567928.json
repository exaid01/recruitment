{"ast":null,"code":"export default {\n  name: 'CompanyJobs',\n  data() {\n    return {\n      jobs: [],\n      loading: true\n    };\n  },\n  mounted() {\n    this.fetchCompanyJobs();\n  },\n  methods: {\n    fetchCompanyJobs() {\n      this.loading = true;\n      // 获取当前公司ID，假设从localStorage中获取\n      const user = JSON.parse(localStorage.getItem('user'));\n      const companyId = user && user.companyId;\n      if (!companyId) {\n        this.$message.error('无法获取公司信息');\n        this.loading = false;\n        return;\n      }\n      this.$axios.get(`/jobs/company/${companyId}`).then(response => {\n        this.jobs = response.data;\n        this.loading = false;\n      }).catch(error => {\n        console.error('获取职位列表失败:', error);\n        this.$message.error('获取职位列表失败');\n        this.loading = false;\n      });\n    },\n    editJob(id) {\n      // 跳转到编辑页面，假设存在编辑页面\n      this.$router.push(`/company/edit-job/${id}`);\n    },\n    deleteJob(id) {\n      this.$confirm('确定要删除这个职位吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$axios.delete(`/jobs/${id}`).then(() => {\n          this.$message.success('职位删除成功');\n          this.fetchCompanyJobs(); // 重新获取职位列表\n        }).catch(error => {\n          console.error('删除职位失败:', error);\n          this.$message.error('删除职位失败');\n        });\n      }).catch(() => {\n        this.$message.info('已取消删除');\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","jobs","loading","mounted","fetchCompanyJobs","methods","user","JSON","parse","localStorage","getItem","companyId","$message","error","$axios","get","then","response","catch","console","editJob","id","$router","push","deleteJob","$confirm","confirmButtonText","cancelButtonText","type","delete","success","info"],"sources":["src/views/company/CompanyJobs.vue"],"sourcesContent":["<template>\n  <div class=\"company-jobs-container\">\n    <h1>我发布的职位</h1>\n    <div v-if=\"loading\" class=\"loading-overlay\">\n      <div class=\"spinner\"></div>\n    </div>\n    <div v-else-if=\"jobs.length === 0\" class=\"no-jobs\">\n      暂无发布的职位\n    </div>\n    <div v-else class=\"jobs-list\">\n      <el-card v-for=\"job in jobs\" :key=\"job.id\" class=\"job-card\">\n        <div class=\"job-title\">{{ job.title }}</div>\n        <div class=\"job-info\">\n          <span class=\"job-salary\">{{ job.salary }}</span>\n          <span class=\"job-location\">{{ job.location }}</span>\n          <span class=\"job-type\">{{ job.jobType }}</span>\n        </div>\n        <div class=\"job-requirements\">\n          {{ job.requirements.substring(0, 100) }}...\n        </div>\n        <div class=\"job-actions\">\n          <el-button type=\"primary\" size=\"small\" @click=\"editJob(job.id)\">编辑</el-button>\n          <el-button type=\"danger\" size=\"small\" @click=\"deleteJob(job.id)\">删除</el-button>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'CompanyJobs',\n  data() {\n    return {\n      jobs: [],\n      loading: true\n    };\n  },\n  mounted() {\n    this.fetchCompanyJobs();\n  },\n  methods: {\n    fetchCompanyJobs() {\n      this.loading = true;\n      // 获取当前公司ID，假设从localStorage中获取\n      const user = JSON.parse(localStorage.getItem('user'));\n      const companyId = user && user.companyId;\n\n      if (!companyId) {\n        this.$message.error('无法获取公司信息');\n        this.loading = false;\n        return;\n      }\n\n      this.$axios.get(`/jobs/company/${companyId}`)\n        .then(response => {\n          this.jobs = response.data;\n          this.loading = false;\n        })\n        .catch(error => {\n          console.error('获取职位列表失败:', error);\n          this.$message.error('获取职位列表失败');\n          this.loading = false;\n        });\n    },\n    editJob(id) {\n      // 跳转到编辑页面，假设存在编辑页面\n      this.$router.push(`/company/edit-job/${id}`);\n    },\n    deleteJob(id) {\n      this.$confirm('确定要删除这个职位吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$axios.delete(`/jobs/${id}`)\n          .then(() => {\n            this.$message.success('职位删除成功');\n            this.fetchCompanyJobs(); // 重新获取职位列表\n          })\n          .catch(error => {\n            console.error('删除职位失败:', error);\n            this.$message.error('删除职位失败');\n          });\n      }).catch(() => {\n        this.$message.info('已取消删除');\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.company-jobs-container {\n  padding: 20px;\n}\n\n.loading-overlay {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n}\n\n.spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid rgba(0, 0, 0, 0.1);\n  border-left-color: #409EFF;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.no-jobs {\n  text-align: center;\n  padding: 50px 0;\n  color: #999;\n}\n\n.jobs-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 20px;\n  margin-top: 20px;\n}\n\n.job-card {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.job-title {\n  font-size: 18px;\n  font-weight: bold;\n  margin-bottom: 10px;\n  color: #333;\n}\n\n.job-info {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-bottom: 10px;\n  color: #666;\n}\n\n.job-requirements {\n  color: #666;\n  margin-bottom: 15px;\n  flex-grow: 1;\n}\n\n.job-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  margin-top: 10px;\n}\n</style>"],"mappings":"AA8BA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,gBAAA;EACA;EACAC,OAAA;IACAD,iBAAA;MACA,KAAAF,OAAA;MACA;MACA,MAAAI,IAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACA,MAAAC,SAAA,GAAAL,IAAA,IAAAA,IAAA,CAAAK,SAAA;MAEA,KAAAA,SAAA;QACA,KAAAC,QAAA,CAAAC,KAAA;QACA,KAAAX,OAAA;QACA;MACA;MAEA,KAAAY,MAAA,CAAAC,GAAA,kBAAAJ,SAAA,IACAK,IAAA,CAAAC,QAAA;QACA,KAAAhB,IAAA,GAAAgB,QAAA,CAAAjB,IAAA;QACA,KAAAE,OAAA;MACA,GACAgB,KAAA,CAAAL,KAAA;QACAM,OAAA,CAAAN,KAAA,cAAAA,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA;QACA,KAAAX,OAAA;MACA;IACA;IACAkB,QAAAC,EAAA;MACA;MACA,KAAAC,OAAA,CAAAC,IAAA,sBAAAF,EAAA;IACA;IACAG,UAAAH,EAAA;MACA,KAAAI,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAZ,IAAA;QACA,KAAAF,MAAA,CAAAe,MAAA,UAAAR,EAAA,IACAL,IAAA;UACA,KAAAJ,QAAA,CAAAkB,OAAA;UACA,KAAA1B,gBAAA;QACA,GACAc,KAAA,CAAAL,KAAA;UACAM,OAAA,CAAAN,KAAA,YAAAA,KAAA;UACA,KAAAD,QAAA,CAAAC,KAAA;QACA;MACA,GAAAK,KAAA;QACA,KAAAN,QAAA,CAAAmB,IAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}