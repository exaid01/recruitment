{"ast":null,"code":"export default {\n  name: 'PublishJob',\n  data() {\n    return {\n      jobForm: {\n        title: '',\n        salary: '',\n        location: '',\n        description: '',\n        requirements: '',\n        benefits: '',\n        status: 1\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入岗位名称',\n          trigger: 'blur'\n        }],\n        salary: [{\n          required: true,\n          message: '请输入薪资范围',\n          trigger: 'blur'\n        }],\n        location: [{\n          required: true,\n          message: '请输入工作地点',\n          trigger: 'blur'\n        }],\n        description: [{\n          required: true,\n          message: '请输入岗位描述',\n          trigger: 'blur'\n        }],\n        requirements: [{\n          required: true,\n          message: '请输入工作要求',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          // 获取当前登录企业的ID\n          // 确保user信息存在\n          if (!this.$store.state.user) {\n            this.$message.error('用户信息不存在，请重新登录');\n            this.$router.push('/login');\n            return;\n          }\n          const companyId = this.$store.state.user.id;\n          this.jobForm.companyId = companyId;\n          this.$axios.post('/jobs', this.jobForm).then(() => {\n            this.$message.success('岗位发布成功');\n            this.$router.push('/company/jobs');\n          }).catch(error => {\n            this.$message.error('岗位发布失败: ' + (error.response.data.message || '服务器错误'));\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  },\n  mounted() {\n    // 检查用户是否登录且为企业角色\n    if (!this.$store.state.user) {\n      this.$message.error('请先登录');\n      this.$router.push('/login');\n    } else if (this.$store.state.user.role !== 1) {\n      this.$message.error('您没有权限访问此页面');\n      this.$router.push('/');\n    }\n  }\n};","map":{"version":3,"names":["name","data","jobForm","title","salary","location","description","requirements","benefits","status","rules","required","message","trigger","methods","submitForm","formName","$refs","validate","valid","$store","state","user","$message","error","$router","push","companyId","id","$axios","post","then","success","catch","response","resetForm","resetFields","mounted","role"],"sources":["src/views/company/PublishJob.vue"],"sourcesContent":["<template>\n  <div class=\"publish-job-container\">\n    <el-card class=\"publish-job-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>发布岗位</span>\n      </div>\n      <el-form ref=\"jobForm\" :model=\"jobForm\" :rules=\"rules\" label-width=\"100px\">\n        <el-form-item label=\"岗位名称\" prop=\"title\">\n          <el-input v-model=\"jobForm.title\" placeholder=\"请输入岗位名称\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"薪资范围\" prop=\"salary\">\n          <el-input v-model=\"jobForm.salary\" placeholder=\"请输入薪资范围，如：10k-20k\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"工作地点\" prop=\"location\">\n          <el-input v-model=\"jobForm.location\" placeholder=\"请输入工作地点\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"岗位描述\" prop=\"description\">\n          <el-input type=\"textarea\" v-model=\"jobForm.description\" placeholder=\"请输入岗位描述\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"工作要求\" prop=\"requirements\">\n          <el-input type=\"textarea\" v-model=\"jobForm.requirements\" placeholder=\"请输入工作要求\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"福利待遇\" prop=\"benefits\">\n          <el-input type=\"textarea\" v-model=\"jobForm.benefits\" placeholder=\"请输入福利待遇\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('jobForm')\">发布岗位</el-button>\n          <el-button @click=\"resetForm('jobForm')\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PublishJob',\n  data() {\n    return {\n      jobForm: {\n        title: '',\n        salary: '',\n        location: '',\n        description: '',\n        requirements: '',\n        benefits: '',\n        status: 1\n      },\n      rules: {\n        title: [\n          { required: true, message: '请输入岗位名称', trigger: 'blur' }\n        ],\n        salary: [\n          { required: true, message: '请输入薪资范围', trigger: 'blur' }\n        ],\n        location: [\n          { required: true, message: '请输入工作地点', trigger: 'blur' }\n        ],\n        description: [\n          { required: true, message: '请输入岗位描述', trigger: 'blur' }\n        ],\n        requirements: [\n          { required: true, message: '请输入工作要求', trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          // 获取当前登录企业的ID\n          // 确保user信息存在\n          if (!this.$store.state.user) {\n            this.$message.error('用户信息不存在，请重新登录');\n            this.$router.push('/login');\n            return;\n          }\n          const companyId = this.$store.state.user.id;\n          this.jobForm.companyId = companyId;\n\n          this.$axios.post('/jobs', this.jobForm)\n            .then(() => {\n              this.$message.success('岗位发布成功');\n              this.$router.push('/company/jobs');\n            })\n            .catch(error => {\n              this.$message.error('岗位发布失败: ' + (error.response.data.message || '服务器错误'));\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  },\n  mounted() {\n    // 检查用户是否登录且为企业角色\n    if (!this.$store.state.user) {\n      this.$message.error('请先登录');\n      this.$router.push('/login');\n    } else if (this.$store.state.user.role !== 1) {\n      this.$message.error('您没有权限访问此页面');\n      this.$router.push('/');\n    }\n  }\n};\n</script>\n\n<style scoped>\n.publish-job-container {\n  padding: 20px;\n  background-color: #f5f7fa;\n}\n.publish-job-card {\n  max-width: 800px;\n  margin: 0 auto;\n}\n</style>"],"mappings":"AAmCA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,OAAA;QACAC,KAAA;QACAC,MAAA;QACAC,QAAA;QACAC,WAAA;QACAC,YAAA;QACAC,QAAA;QACAC,MAAA;MACA;MACAC,KAAA;QACAP,KAAA,GACA;UAAAQ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAT,MAAA,GACA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAR,QAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAP,WAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAN,YAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACAC,WAAAC,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAE,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA;UACA,UAAAC,MAAA,CAAAC,KAAA,CAAAC,IAAA;YACA,KAAAC,QAAA,CAAAC,KAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;YACA;UACA;UACA,MAAAC,SAAA,QAAAP,MAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAM,EAAA;UACA,KAAA1B,OAAA,CAAAyB,SAAA,GAAAA,SAAA;UAEA,KAAAE,MAAA,CAAAC,IAAA,eAAA5B,OAAA,EACA6B,IAAA;YACA,KAAAR,QAAA,CAAAS,OAAA;YACA,KAAAP,OAAA,CAAAC,IAAA;UACA,GACAO,KAAA,CAAAT,KAAA;YACA,KAAAD,QAAA,CAAAC,KAAA,eAAAA,KAAA,CAAAU,QAAA,CAAAjC,IAAA,CAAAW,OAAA;UACA;QACA;UACA;QACA;MACA;IACA;IACAuB,UAAAnB,QAAA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAoB,WAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,UAAAjB,MAAA,CAAAC,KAAA,CAAAC,IAAA;MACA,KAAAC,QAAA,CAAAC,KAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA,gBAAAN,MAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAgB,IAAA;MACA,KAAAf,QAAA,CAAAC,KAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}