{"ast":null,"code":"export default {\n  name: 'PublishJob',\n  data() {\n    return {\n      jobForm: {\n        title: '',\n        salary: '',\n        location: '',\n        jobType: '',\n        experience: '',\n        education: '',\n        headcount: '',\n        description: '',\n        requirements: '',\n        benefits: '',\n        tags: [],\n        status: 1,\n        companyId: ''\n      },\n      inputTag: '',\n      companyInfo: null,\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入岗位名称',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 50,\n          message: '岗位名称长度应在2-50个字符之间',\n          trigger: 'blur'\n        }],\n        salary: [{\n          required: true,\n          message: '请输入薪资范围',\n          trigger: 'blur'\n        }, {\n          pattern: /^[0-9]+k-[0-9]+k$/,\n          message: '薪资范围格式应为：数字k-数字k',\n          trigger: 'blur'\n        }],\n        location: [{\n          required: true,\n          message: '请输入工作地点',\n          trigger: 'blur'\n        }],\n        jobType: [{\n          required: true,\n          message: '请选择职位类型',\n          trigger: 'change'\n        }],\n        experience: [{\n          required: true,\n          message: '请选择工作经验',\n          trigger: 'change'\n        }],\n        education: [{\n          required: true,\n          message: '请选择学历要求',\n          trigger: 'change'\n        }],\n        description: [{\n          required: true,\n          message: '请输入岗位描述',\n          trigger: 'blur'\n        }, {\n          min: 10,\n          message: '岗位描述至少10个字符',\n          trigger: 'blur'\n        }],\n        requirements: [{\n          required: true,\n          message: '请输入工作要求',\n          trigger: 'blur'\n        }, {\n          min: 10,\n          message: '工作要求至少10个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          // 提交表单数据\n          this.$axios.post('/jobs', this.jobForm).then(() => {\n            this.$message.success('岗位发布成功');\n            this.$router.push('/company/jobs');\n          }).catch(error => {\n            this.$message.error('岗位发布失败: ' + (error.response.data.message || '服务器错误'));\n          });\n        } else {\n          this.$message.warning('请完善表单信息');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n      this.jobForm.tags = [];\n      this.inputTag = '';\n    },\n    handleTagAdd() {\n      if (this.inputTag && this.jobForm.tags.indexOf(this.inputTag) === -1) {\n        this.jobForm.tags.push(this.inputTag);\n      }\n      this.inputTag = '';\n    },\n    handleTagClose(tag) {\n      const index = this.jobForm.tags.indexOf(tag);\n      if (index !== -1) {\n        this.jobForm.tags.splice(index, 1);\n      }\n    },\n    getCompanyInfo() {\n      const companyId = this.$store.state.user.id;\n      this.$axios.get(`/companies/${companyId}`).then(response => {\n        this.companyInfo = response.data;\n      }).catch(error => {\n        console.error('获取公司信息失败:', error);\n      });\n    }\n  },\n  mounted() {\n    // 检查用户是否登录且为企业角色\n    if (!this.$store.state.user) {\n      this.$message.error('请先登录');\n      this.$router.push('/login');\n    } else if (this.$store.state.user.role !== 1) {\n      this.$message.error('您没有权限访问此页面');\n      this.$router.push('/');\n    } else {\n      // 设置公司ID\n      this.jobForm.companyId = this.$store.state.user.id;\n      // 获取公司信息\n      this.getCompanyInfo();\n    }\n  }\n};","map":{"version":3,"names":["name","data","jobForm","title","salary","location","jobType","experience","education","headcount","description","requirements","benefits","tags","status","companyId","inputTag","companyInfo","rules","required","message","trigger","min","max","pattern","methods","submitForm","formName","$refs","validate","valid","$axios","post","then","$message","success","$router","push","catch","error","response","warning","resetForm","resetFields","handleTagAdd","indexOf","handleTagClose","tag","index","splice","getCompanyInfo","$store","state","user","id","get","console","mounted","role"],"sources":["src/views/company/PublishJob.vue"],"sourcesContent":["<template>\n  <div class=\"publish-job-container\">\n    <div class=\"page-header\">\n      <h1>发布新职位</h1>\n      <p class=\"subtitle\">填写以下信息，发布您的招聘职位</p>\n    </div>\n\n    <el-card class=\"publish-job-card\">\n      <!-- 公司信息预览 -->\n      <div class=\"company-info\" v-if=\"companyInfo\">\n        <img :src=\"companyInfo.logo || '/default-company-logo.png'\" alt=\"公司logo\" class=\"company-logo\">\n        <div class=\"company-details\">\n          <h3>{{ companyInfo.name }}</h3>\n          <p class=\"company-desc\">{{ companyInfo.industry }} | {{ companyInfo.scale }} | {{ companyInfo.location }}</p>\n        </div>\n      </div>\n\n      <el-form ref=\"jobForm\" :model=\"jobForm\" :rules=\"rules\" label-width=\"120px\" class=\"job-form\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"24\">\n            <el-form-item label=\"岗位名称\" prop=\"title\" class=\"required\">\n              <el-input v-model=\"jobForm.title\" placeholder=\"请输入岗位名称\" size=\"medium\"></el-input>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"薪资范围\" prop=\"salary\" class=\"required\">\n              <el-input v-model=\"jobForm.salary\" placeholder=\"请输入薪资范围，如：10k-20k\" size=\"medium\"></el-input>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"工作地点\" prop=\"location\" class=\"required\">\n              <el-input v-model=\"jobForm.location\" placeholder=\"请输入工作地点\" size=\"medium\"></el-input>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"职位类型\" prop=\"jobType\" class=\"required\">\n              <el-select v-model=\"jobForm.jobType\" placeholder=\"请选择职位类型\" size=\"medium\">\n                <el-option label=\"全职\" value=\"full-time\"></el-option>\n                <el-option label=\"兼职\" value=\"part-time\"></el-option>\n                <el-option label=\"实习\" value=\"internship\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"工作经验\" prop=\"experience\" class=\"required\">\n              <el-select v-model=\"jobForm.experience\" placeholder=\"请选择工作经验\" size=\"medium\">\n                <el-option label=\"应届毕业生\" value=\"fresh-graduate\"></el-option>\n                <el-option label=\"1年以下\" value=\"less-than-1-year\"></el-option>\n                <el-option label=\"1-3年\" value=\"1-3-years\"></el-option>\n                <el-option label=\"3-5年\" value=\"3-5-years\"></el-option>\n                <el-option label=\"5-10年\" value=\"5-10-years\"></el-option>\n                <el-option label=\"10年以上\" value=\"more-than-10-years\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"学历要求\" prop=\"education\" class=\"required\">\n              <el-select v-model=\"jobForm.education\" placeholder=\"请选择学历要求\" size=\"medium\">\n                <el-option label=\"大专\" value=\"college\"></el-option>\n                <el-option label=\"本科\" value=\"bachelor\"></el-option>\n                <el-option label=\"硕士\" value=\"master\"></el-option>\n                <el-option label=\"博士\" value=\"doctor\"></el-option>\n                <el-option label=\"不限\" value=\"no-limit\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"12\">\n            <el-form-item label=\"招聘人数\" prop=\"headcount\">\n              <el-input v-model=\"jobForm.headcount\" placeholder=\"请输入招聘人数\" size=\"medium\"></el-input>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"岗位描述\" prop=\"description\" class=\"required\">\n              <el-input type=\"textarea\" v-model=\"jobForm.description\" placeholder=\"请详细描述岗位职责和工作内容\" :rows=\"5\" size=\"medium\"></el-input>\n              <div class=\"form-hint\">建议包含：工作职责、团队情况、项目介绍等信息</div>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"工作要求\" prop=\"requirements\" class=\"required\">\n              <el-input type=\"textarea\" v-model=\"jobForm.requirements\" placeholder=\"请详细描述任职要求\" :rows=\"5\" size=\"medium\"></el-input>\n              <div class=\"form-hint\">建议包含：技能要求、经验要求、性格特质等信息</div>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"福利待遇\" prop=\"benefits\">\n              <el-input type=\"textarea\" v-model=\"jobForm.benefits\" placeholder=\"请输入福利待遇\" :rows=\"3\" size=\"medium\"></el-input>\n              <div class=\"form-hint\">例如：五险一金、年终奖、带薪年假、节日福利等</div>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\">\n            <el-form-item label=\"职位标签\">\n              <el-tag v-for=\"tag in jobForm.tags\" :key=\"tag\" closable @close=\"handleTagClose(tag)\">\n                {{ tag }}\n              </el-tag>\n              <el-input\n                v-model=\"inputTag\"\n                placeholder=\"输入标签，按回车添加\"\n                @keyup.enter.native=\"handleTagAdd\"\n                size=\"small\"\n                class=\"tag-input\"\n              ></el-input>\n            </el-form-item>\n          </el-col>\n\n          <el-col :span=\"24\" class=\"form-actions\">\n            <el-button type=\"primary\" @click=\"submitForm('jobForm')\" size=\"medium\">发布岗位</el-button>\n            <el-button @click=\"resetForm('jobForm')\" size=\"medium\">重置</el-button>\n            <el-button @click=\"$router.go(-1)\" size=\"medium\">取消</el-button>\n          </el-col>\n        </el-row>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PublishJob',\n  data() {\n    return {\n      jobForm: {\n        title: '',\n        salary: '',\n        location: '',\n        jobType: '',\n        experience: '',\n        education: '',\n        headcount: '',\n        description: '',\n        requirements: '',\n        benefits: '',\n        tags: [],\n        status: 1,\n        companyId: ''\n      },\n      inputTag: '',\n      companyInfo: null,\n      rules: {\n        title: [\n          { required: true, message: '请输入岗位名称', trigger: 'blur' },\n          { min: 2, max: 50, message: '岗位名称长度应在2-50个字符之间', trigger: 'blur' }\n        ],\n        salary: [\n          { required: true, message: '请输入薪资范围', trigger: 'blur' },\n          { pattern: /^[0-9]+k-[0-9]+k$/, message: '薪资范围格式应为：数字k-数字k', trigger: 'blur' }\n        ],\n        location: [\n          { required: true, message: '请输入工作地点', trigger: 'blur' }\n        ],\n        jobType: [\n          { required: true, message: '请选择职位类型', trigger: 'change' }\n        ],\n        experience: [\n          { required: true, message: '请选择工作经验', trigger: 'change' }\n        ],\n        education: [\n          { required: true, message: '请选择学历要求', trigger: 'change' }\n        ],\n        description: [\n          { required: true, message: '请输入岗位描述', trigger: 'blur' },\n          { min: 10, message: '岗位描述至少10个字符', trigger: 'blur' }\n        ],\n        requirements: [\n          { required: true, message: '请输入工作要求', trigger: 'blur' },\n          { min: 10, message: '工作要求至少10个字符', trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          // 提交表单数据\n          this.$axios.post('/jobs', this.jobForm)\n            .then(() => {\n              this.$message.success('岗位发布成功');\n              this.$router.push('/company/jobs');\n            })\n            .catch(error => {\n              this.$message.error('岗位发布失败: ' + (error.response.data.message || '服务器错误'));\n            });\n        } else {\n          this.$message.warning('请完善表单信息');\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n      this.jobForm.tags = [];\n      this.inputTag = '';\n    },\n    handleTagAdd() {\n      if (this.inputTag && this.jobForm.tags.indexOf(this.inputTag) === -1) {\n        this.jobForm.tags.push(this.inputTag);\n      }\n      this.inputTag = '';\n    },\n    handleTagClose(tag) {\n      const index = this.jobForm.tags.indexOf(tag);\n      if (index !== -1) {\n        this.jobForm.tags.splice(index, 1);\n      }\n    },\n    getCompanyInfo() {\n      const companyId = this.$store.state.user.id;\n      this.$axios.get(`/companies/${companyId}`)\n        .then(response => {\n          this.companyInfo = response.data;\n        })\n        .catch(error => {\n          console.error('获取公司信息失败:', error);\n        });\n    }\n  },\n  mounted() {\n    // 检查用户是否登录且为企业角色\n    if (!this.$store.state.user) {\n      this.$message.error('请先登录');\n      this.$router.push('/login');\n    } else if (this.$store.state.user.role !== 1) {\n      this.$message.error('您没有权限访问此页面');\n      this.$router.push('/');\n    } else {\n      // 设置公司ID\n      this.jobForm.companyId = this.$store.state.user.id;\n      // 获取公司信息\n      this.getCompanyInfo();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.publish-job-container {\n  padding: 20px;\n  background-color: #f5f7fa;\n  min-height: 100vh;\n}\n\n.page-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.page-header h1 {\n  font-size: 28px;\n  color: #333;\n  margin-bottom: 10px;\n}\n\n.page-header .subtitle {\n  color: #666;\n  font-size: 16px;\n}\n\n.publish-job-card {\n  max-width: 1000px;\n  margin: 0 auto;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.company-info {\n  display: flex;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #f0f0f0;\n  margin-bottom: 20px;\n}\n\n.company-logo {\n  width: 80px;\n  height: 80px;\n  border-radius: 4px;\n  object-fit: cover;\n  margin-right: 20px;\n}\n\n.company-details h3 {\n  margin: 0 0 5px 0;\n  font-size: 18px;\n  color: #333;\n}\n\n.company-desc {\n  color: #666;\n  font-size: 14px;\n}\n\n.job-form {\n  padding: 0 20px 20px 20px;\n}\n\n.required .el-form-item__label::before {\n  content: '*';\n  color: #f56c6c;\n  margin-right: 4px;\n}\n\n.form-hint {\n  color: #909399;\n  font-size: 12px;\n  margin-top: 5px;\n}\n\n.tag-input {\n  width: 160px;\n  display: inline-block;\n  margin-left: 10px;\n}\n\n.el-tag {\n  margin-right: 10px;\n}\n\n.form-actions {\n  text-align: center;\n  margin-top: 30px;\n}\n\n.form-actions .el-button {\n  margin: 0 10px;\n}\n\n/* 响应式调整 */\n@media screen and (max-width: 768px) {\n  .el-col {\n    width: 100% !important;\n  }\n\n  .company-info {\n    flex-direction: column;\n    text-align: center;\n  }\n\n  .company-logo {\n    margin-right: 0;\n    margin-bottom: 15px;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}