{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'AdminDashboard',\n  data() {\n    return {\n      activeTab: 'userManagement',\n      users: [],\n      dynamics: [],\n      comments: []\n    };\n  },\n  created() {\n    this.checkAdminRole();\n    this.loadUsers();\n    this.loadDynamics();\n    this.loadComments();\n  },\n  methods: {\n    goToFrontend() {\n      this.$router.push('/');\n    },\n    checkAdminRole() {\n      if (!this.$store.state.user || this.$store.state.user.role !== 2) {\n        this.$message.error('您没有权限访问管理后台');\n        this.$router.push('/');\n      }\n    },\n    loadUsers() {\n      // 调用后端接口获取用户数据\n      axios.get('/admin/users').then(response => {\n        this.users = response.data;\n      }).catch(error => {\n        this.$message.error('获取用户数据失败: ' + error.message);\n        console.error('Failed to load users:', error);\n      });\n    },\n    loadDynamics() {\n      // 模拟数据\n      this.dynamics = [{\n        id: 1,\n        userId: 1,\n        content: '这是一条测试动态',\n        status: 0\n      }, {\n        id: 2,\n        userId: 1,\n        content: '这是另一条测试动态',\n        status: 0\n      }];\n    },\n    loadComments() {\n      // 模拟数据\n      this.comments = [{\n        id: 1,\n        userId: 1,\n        content: '这是一条测试评论',\n        status: 0\n      }, {\n        id: 2,\n        userId: 2,\n        content: '这是另一条测试评论',\n        status: 0\n      }];\n    },\n    toggleUserStatus(user) {\n      const newStatus = user.status === 1 ? 0 : 1;\n      // 调用后端接口切换用户状态\n      axios.put(`/admin/users/${user.id}/status`, {\n        status: newStatus\n      }).then(() => {\n        user.status = newStatus;\n        this.$message.success(`用户${newStatus === 1 ? '启用' : '禁用'}成功`);\n      }).catch(error => {\n        this.$message.error(`用户${newStatus === 1 ? '启用' : '禁用'}失败: ` + error.message);\n        console.error('Failed to toggle user status:', error);\n      });\n    },\n    approveDynamic(dynamic) {\n      // 模拟API调用\n      setTimeout(() => {\n        dynamic.status = 1;\n        this.$message.success('动态审核通过');\n      }, 500);\n    },\n    rejectDynamic(dynamic) {\n      // 模拟API调用\n      setTimeout(() => {\n        dynamic.status = 2;\n        this.$message.success('动态已拒绝');\n      }, 500);\n    },\n    approveComment(comment) {\n      // 模拟API调用\n      setTimeout(() => {\n        comment.status = 1;\n        this.$message.success('评论审核通过');\n      }, 500);\n    },\n    rejectComment(comment) {\n      // 模拟API调用\n      setTimeout(() => {\n        comment.status = 2;\n        this.$message.success('评论已拒绝');\n      }, 500);\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","activeTab","users","dynamics","comments","created","checkAdminRole","loadUsers","loadDynamics","loadComments","methods","goToFrontend","$router","push","$store","state","user","role","$message","error","get","then","response","catch","message","console","id","userId","content","status","toggleUserStatus","newStatus","put","success","approveDynamic","dynamic","setTimeout","rejectDynamic","approveComment","comment","rejectComment"],"sources":["src/views/admin/AdminDashboard.vue"],"sourcesContent":["<template>\n  <div class=\"admin-container\">\n    <el-container>\n      <el-header style=\"display: flex; justify-content: space-between; align-items: center;\">\n  <span>招聘网站管理后台</span>\n  <el-button type=\"primary\" @click=\"goToFrontend\">返回前台</el-button>\n</el-header>\n      <el-container>\n        <el-aside width=\"200px\">\n          <el-menu :default-openeds=\"['1', '2']\">\n            <el-submenu index=\"1\">\n              <template slot=\"title\"><i class=\"el-icon-user\"></i>用户管理</template>\n              <el-menu-item index=\"1-1\" @click=\"activeTab = 'userManagement'\">用户列表</el-menu-item>\n            </el-submenu>\n            <el-submenu index=\"2\">\n              <template slot=\"title\"><i class=\"el-icon-edit\"></i>内容审核</template>\n              <el-menu-item index=\"2-1\" @click=\"activeTab = 'dynamicReview'\">动态审核</el-menu-item>\n              <el-menu-item index=\"2-2\" @click=\"activeTab = 'commentReview'\">评论审核</el-menu-item>\n            </el-submenu>\n          </el-menu>\n        </el-aside>\n        <el-main>\n          <div v-if=\"activeTab === 'userManagement'\">\n            <h3>用户管理</h3>\n            <el-table :data=\"users\" style=\"width: 100%\">\n              <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n              <el-table-column prop=\"username\" label=\"用户名\" width=\"180\"></el-table-column>\n              <el-table-column prop=\"email\" label=\"邮箱\" width=\"180\"></el-table-column>\n              <el-table-column prop=\"role\" label=\"角色\" width=\"100\">\n                <template slot-scope=\"scope\">\n                  <span v-if=\"scope.row.role === 0\">求职者</span>\n                  <span v-if=\"scope.row.role === 1\">企业</span>\n                  <span v-if=\"scope.row.role === 2\">管理员</span>\n                </template>\n              </el-table-column>\n              <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n                <template slot-scope=\"scope\">\n                  <span v-if=\"scope.row.status === 1\" style=\"color: green\">正常</span>\n                  <span v-if=\"scope.row.status === 0\" style=\"color: red\">禁用</span>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"操作\" width=\"150\">\n                <template slot-scope=\"scope\">\n                  <el-button type=\"primary\" size=\"small\" @click=\"toggleUserStatus(scope.row)\">\n                    {{ scope.row.status === 1 ? '禁用' : '启用' }}\n                  </el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n\n          <div v-if=\"activeTab === 'dynamicReview'\">\n            <h3>动态审核</h3>\n            <!-- 动态审核内容 -->\n            <el-table :data=\"dynamics\" style=\"width: 100%\">\n              <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n              <el-table-column prop=\"userId\" label=\"用户ID\" width=\"80\"></el-table-column>\n              <el-table-column prop=\"content\" label=\"内容\" width=\"300\"></el-table-column>\n              <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n                <template slot-scope=\"scope\">\n                  <span v-if=\"scope.row.status === 0\" style=\"color: orange\">待审核</span>\n                  <span v-if=\"scope.row.status === 1\" style=\"color: green\">已通过</span>\n                  <span v-if=\"scope.row.status === 2\" style=\"color: red\">已拒绝</span>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"操作\" width=\"200\">\n                <template slot-scope=\"scope\">\n                  <el-button type=\"primary\" size=\"small\" @click=\"approveDynamic(scope.row)\">通过</el-button>\n                  <el-button type=\"danger\" size=\"small\" @click=\"rejectDynamic(scope.row)\">拒绝</el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n\n          <div v-if=\"activeTab === 'commentReview'\">\n            <h3>评论审核</h3>\n            <!-- 评论审核内容 -->\n            <el-table :data=\"comments\" style=\"width: 100%\">\n              <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n              <el-table-column prop=\"userId\" label=\"用户ID\" width=\"80\"></el-table-column>\n              <el-table-column prop=\"content\" label=\"内容\" width=\"300\"></el-table-column>\n              <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n                <template slot-scope=\"scope\">\n                  <span v-if=\"scope.row.status === 0\" style=\"color: orange\">待审核</span>\n                  <span v-if=\"scope.row.status === 1\" style=\"color: green\">已通过</span>\n                  <span v-if=\"scope.row.status === 2\" style=\"color: red\">已拒绝</span>\n                </template>\n              </el-table-column>\n              <el-table-column label=\"操作\" width=\"200\">\n                <template slot-scope=\"scope\">\n                  <el-button type=\"primary\" size=\"small\" @click=\"approveComment(scope.row)\">通过</el-button>\n                  <el-button type=\"danger\" size=\"small\" @click=\"rejectComment(scope.row)\">拒绝</el-button>\n                </template>\n              </el-table-column>\n            </el-table>\n          </div>\n        </el-main>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nexport default {\n  name: 'AdminDashboard',\n  data() {\n    return {\n      activeTab: 'userManagement',\n      users: [],\n      dynamics: [],\n      comments: []\n    };\n  },\n  created() {\n    this.checkAdminRole();\n    this.loadUsers();\n    this.loadDynamics();\n    this.loadComments();\n  },\n  methods: {\n    goToFrontend() {\n      this.$router.push('/');\n    },\n\n    checkAdminRole() {\n      if (!this.$store.state.user || this.$store.state.user.role !== 2) {\n        this.$message.error('您没有权限访问管理后台');\n        this.$router.push('/');\n      }\n    },\n    loadUsers() {\n      // 调用后端接口获取用户数据\n      axios.get('/admin/users')\n        .then(response => {\n          this.users = response.data;\n        })\n        .catch(error => {\n          this.$message.error('获取用户数据失败: ' + error.message);\n          console.error('Failed to load users:', error);\n        });\n    },\n    loadDynamics() {\n      // 模拟数据\n      this.dynamics = [\n        { id: 1, userId: 1, content: '这是一条测试动态', status: 0 },\n        { id: 2, userId: 1, content: '这是另一条测试动态', status: 0 }\n      ];\n    },\n    loadComments() {\n      // 模拟数据\n      this.comments = [\n        { id: 1, userId: 1, content: '这是一条测试评论', status: 0 },\n        { id: 2, userId: 2, content: '这是另一条测试评论', status: 0 }\n      ];\n    },\n    toggleUserStatus(user) {\n      const newStatus = user.status === 1 ? 0 : 1;\n      // 调用后端接口切换用户状态\n      axios.put(`/admin/users/${user.id}/status`, { status: newStatus })\n        .then(() => {\n          user.status = newStatus;\n          this.$message.success(`用户${newStatus === 1 ? '启用' : '禁用'}成功`);\n        })\n        .catch(error => {\n          this.$message.error(`用户${newStatus === 1 ? '启用' : '禁用'}失败: ` + error.message);\n          console.error('Failed to toggle user status:', error);\n        });\n    },\n    approveDynamic(dynamic) {\n      // 模拟API调用\n      setTimeout(() => {\n        dynamic.status = 1;\n        this.$message.success('动态审核通过');\n      }, 500);\n    },\n    rejectDynamic(dynamic) {\n      // 模拟API调用\n      setTimeout(() => {\n        dynamic.status = 2;\n        this.$message.success('动态已拒绝');\n      }, 500);\n    },\n    approveComment(comment) {\n      // 模拟API调用\n      setTimeout(() => {\n        comment.status = 1;\n        this.$message.success('评论审核通过');\n      }, 500);\n    },\n    rejectComment(comment) {\n      // 模拟API调用\n      setTimeout(() => {\n        comment.status = 2;\n        this.$message.success('评论已拒绝');\n      }, 500);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.admin-container {\n  height: 100vh;\n}\n.el-header {\n  background-color: #1890ff;\n  color: #fff;\n  font-size: 20px;\n  line-height: 60px;\n  text-align: center;\n}\n.el-aside {\n  background-color: #5d7fa5;\n}\n.el-menu {\n  background-color: #5d7fa5;\n  color: #ecf0f1;\n}\n.el-submenu__title {\n  color: #fff;\n}\n.el-menu-item {\n  color: #bdc3c7;\n}\n.el-menu-item:hover {\n  background-color: #3498db;\n  color: #fff;\n}\n.el-menu-item.is-active {\n  background-color: #3498db;\n  color: #fff;\n}\n.el-main {\n  padding: 20px;\n  background-color: #f5f7fa;\n}\n</style>"],"mappings":"AAuGA,OAAAA,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,KAAA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,cAAA;IACA,KAAAC,SAAA;IACA,KAAAC,YAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,aAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IAEAP,eAAA;MACA,UAAAQ,MAAA,CAAAC,KAAA,CAAAC,IAAA,SAAAF,MAAA,CAAAC,KAAA,CAAAC,IAAA,CAAAC,IAAA;QACA,KAAAC,QAAA,CAAAC,KAAA;QACA,KAAAP,OAAA,CAAAC,IAAA;MACA;IACA;IACAN,UAAA;MACA;MACAT,KAAA,CAAAsB,GAAA,iBACAC,IAAA,CAAAC,QAAA;QACA,KAAApB,KAAA,GAAAoB,QAAA,CAAAtB,IAAA;MACA,GACAuB,KAAA,CAAAJ,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,gBAAAA,KAAA,CAAAK,OAAA;QACAC,OAAA,CAAAN,KAAA,0BAAAA,KAAA;MACA;IACA;IACAX,aAAA;MACA;MACA,KAAAL,QAAA,IACA;QAAAuB,EAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;MAAA,GACA;QAAAH,EAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;MAAA,EACA;IACA;IACApB,aAAA;MACA;MACA,KAAAL,QAAA,IACA;QAAAsB,EAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;MAAA,GACA;QAAAH,EAAA;QAAAC,MAAA;QAAAC,OAAA;QAAAC,MAAA;MAAA,EACA;IACA;IACAC,iBAAAd,IAAA;MACA,MAAAe,SAAA,GAAAf,IAAA,CAAAa,MAAA;MACA;MACA/B,KAAA,CAAAkC,GAAA,iBAAAhB,IAAA,CAAAU,EAAA;QAAAG,MAAA,EAAAE;MAAA,GACAV,IAAA;QACAL,IAAA,CAAAa,MAAA,GAAAE,SAAA;QACA,KAAAb,QAAA,CAAAe,OAAA,MAAAF,SAAA;MACA,GACAR,KAAA,CAAAJ,KAAA;QACA,KAAAD,QAAA,CAAAC,KAAA,MAAAY,SAAA,6BAAAZ,KAAA,CAAAK,OAAA;QACAC,OAAA,CAAAN,KAAA,kCAAAA,KAAA;MACA;IACA;IACAe,eAAAC,OAAA;MACA;MACAC,UAAA;QACAD,OAAA,CAAAN,MAAA;QACA,KAAAX,QAAA,CAAAe,OAAA;MACA;IACA;IACAI,cAAAF,OAAA;MACA;MACAC,UAAA;QACAD,OAAA,CAAAN,MAAA;QACA,KAAAX,QAAA,CAAAe,OAAA;MACA;IACA;IACAK,eAAAC,OAAA;MACA;MACAH,UAAA;QACAG,OAAA,CAAAV,MAAA;QACA,KAAAX,QAAA,CAAAe,OAAA;MACA;IACA;IACAO,cAAAD,OAAA;MACA;MACAH,UAAA;QACAG,OAAA,CAAAV,MAAA;QACA,KAAAX,QAAA,CAAAe,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}